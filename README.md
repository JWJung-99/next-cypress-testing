# Next.js + Cypress ν…μ¤ν… μ‹¤μµ

## 1. ν”„λ΅ νΈμ—”λ“ ν…μ¤ν…

### μ™ ν…μ¤νΈ μ½”λ“κ°€ ν•„μ”ν• κΉ?

- λ¨λ“  μ‹μ¤ν…μ„ μ‚¬λμ΄ μΌμΌμ΄ μ§μ ‘ ν…μ¤νΈν•λ” κ²ƒμ€ λ¶κ°€λ¥ν•λ‹¤.
- κ·λ¨κ°€ μ‘μ€ μ‹μ¤ν…μ€ ν…μ¤ν…μ΄ ν•„μ” μ—†μ„ μλ„ μμ§€λ§, κ·λ¨κ°€ μ»¤μ§μλ΅ ν…μ¤νΈν•  μ μλ” λ²”μ„μ ν•κ³„μ™€ ν…μ¤νΈ μ‹κ°„μ΄ λμ–΄λ‚λ‹¤.

### λ¬΄μ—‡μ„ ν…μ¤νΈ ν•΄μ•Όν• κΉ?

- Front-end κ°λ°μλ” μ‚¬μ©μ κ΄€μ μ μΈν„°λ ‰μ…κ³Ό κΈ°λ¥ λ™μ‘μ„ ν…μ¤νΈ ν•΄μ•Όν•λ‹¤.

### μ–΄λ–»κ² ν…μ¤νΈ ν•΄μ•Όν• κΉ?

- λ€μ¤‘μ μΈ λΌμ΄λΈλ¬λ¦¬λ“¤μ„ μ‚¬μ©ν•λ‹¤.
- Unit Test: **React Testing Library** λ“±
- E2E Test: **Cypress** λ“±

### μ™ CypressμΌκΉ?

- Front-end κ°λ° E2E λ¶„μ•Όμ—μ„ κ°€μ¥ λ€μ¤‘μ μ΄κ³  μ•μ •μ μΈ λΌμ΄λΈλ¬λ¦¬μ΄λ‹¤.
- [λ¬Έμ„ν™”](https://docs.cypress.io/)κ°€ μ λμ–΄ μκ³ , μ°Έκ³ ν•  μ μλ” λ νΌλ°μ¤κ°€ λ§λ‹¤.

### E2Eκ°€ λ¬΄μ—‡μΌκΉ?

- **E2E**: End-to-End ν…μ¤νΈλ¥Ό μλ―Έν•λ‹¤.

  |                                               ν”„λ΅μ νΈ ν΄λ”                                               |
  | :-------------------------------------------------------------------------------------------------------: |
  | <img width="500" src="https://github.com/user-attachments/assets/d61ebc08-7157-4660-a402-152a7c20cf0b" /> |

  - **Unit Test**

    ν…μ¤νΈ μ½”λ“λ¥Ό μ‘μ„±ν•λ” λΉ„μ©μ΄ κ°€μ¥ μ‘λ‹¤.

    β‡’ ν…μ¤νΈ μ½”λ“ μ‘μ„±μ— μ‹κ°„μ΄ μ κ² λ“¤κ³  μ‰½κ² μ‘μ„±ν•  μ μλ‹¤.

  - **Integration Test**

    Unit Test λ‡ κ°λ¥Ό μ΅°ν•©ν•μ—¬ ν•λ‚μ κΈ°λ¥μ„ μ κ²€ν•λ” μΈ΅λ©΄μ΄λ‹¤.

  - **End-to-End Test**

    μ„λΉ„μ¤μ μµμΆ… ν’μ§μ„ λ³΄μ¥ν•κΈ° μ„ν•΄ μ‚¬μ©ν•λ©°, κ°€μ¥ λΉ„μ©μ΄ λ§μ΄ λ“¤μ–΄κ°„λ‹¤.

    β‡’ ν…μ¤νΈ μ½”λ“ μ‘μ„±μ— μ‹κ°„μ΄ λ§μ΄ λ“¤κ³  μ‘μ„±ν•κΈ° μ–΄λ µλ‹¤.

---

## 2. ν…μ¤ν… μ‹¤μµ ν™κ²½ κµ¬μ„±

> **ν™κ²½** : Next.js + Cypress ([κ³µμ‹λ¬Έμ„](https://nextjs.org/docs/app/guides/testing/cypress))

### ν”„λ΅μ νΈμ— cypress μ„¤μΉ

- `devDependencies`μ— cypressλ¥Ό μ„¤μΉν•λ‹¤.

  ```bash
  npm install -D cypress

  # or

  yarn add -D cypress

  # or

  pnpm install -D cypress
  ```

- package.json νμΌμ `scripts`μ— λ‹¤μκ³Ό κ°™μ΄ μ»¤μ¤ν…€ λ…λ Ήμ–΄λ¥Ό μ¶”κ°€ν•λ‹¤.

  ```json
  {
    "scripts": {
      "dev": "next dev",
      "build": "next build",
      "start": "next start",
      "lint": "next lint",
      "cypress:open": "cypress open"
    }
  }
  ```

### cypress μ‹¤ν–‰

- ν„°λ―Έλ„μ—μ„ scriptμ— μ¶”κ°€ν• λ…λ Ήμ–΄λ¥Ό μ…λ ¥ν•΄ cypressλ¥Ό μ‹¤ν–‰ν•λ‹¤.

  ```bash
  npm run cypress:open
  ```

  |                                                   cypress μ‹¤ν–‰ κ²°κ³Ό                                                   |
  | :-------------------------------------------------------------------------------------------------------------------: |
  | <img width="500" alt="Image" src="https://github.com/user-attachments/assets/d2cf7003-96b0-4fc8-b824-16409b408895" /> |

- **E2E Testingμ„ μ„ νƒ**ν•κ³  ν…μ¤νΈν•  λΈλΌμ°μ €λ¥Ό μ„ νƒν•λ‹¤.

  |                                                     λΈλΌμ°μ € μ„ νƒ                                                     |
  | :-------------------------------------------------------------------------------------------------------------------: |
  | <img width="500" alt="Image" src="https://github.com/user-attachments/assets/29ef270b-512f-446f-a7b8-6ce3699532d5" /> |

- cypress μ°½μ„ λ‹«κ³  ν”„λ΅μ νΈ ν΄λ”λ΅ λμ•„μ¤λ©΄, cypress ν΄λ”μ™€ cypress μ„¤μ • νμΌμ΄ μƒμ„±λ κ²ƒμ„ ν™•μΈν•  μ μλ‹¤.

  |                                                     ν”„λ΅μ νΈ ν΄λ”                                                     |
  | :-------------------------------------------------------------------------------------------------------------------: |
  | <img width="150" alt="Image" src="https://github.com/user-attachments/assets/da448202-a32c-41cf-94c9-b25a8305e2fd" /> |

---

## 3. ν…μ¤ν… μ‹μ‘ν•κΈ°

### μ²« λ²μ§Έ ν…μ¤νΈ μ½”λ“ μ‘μ„±

- μƒμ„±λ cypress ν΄λ” μ•μ— **e2e** ν΄λ”λ¥Ό μƒμ„±ν•κ³  μ΄ μ•μ— ν…μ¤νΈ μ½”λ“λ¥Ό μ‘μ„±ν•λ‹¤.

  - νμΌ μ΄λ¦„μ€ `[νμΌ μ΄λ¦„]/cy.js` ν•νƒμ΄λ‹¤.
    - `cy.js`: JavaScriptλ΅ μ‘μ„±λ cypress μ½”λ“λ¥Ό μλ―Έν•λ‹¤.

  <br />

  ```js
  describe("ν™νμ΄μ§€ ν…μ¤νΈ μ½”λ“", () => {
    it('"/"λ΅ μ§„μ…ν•λ©΄ νμ΄μ§€κ°€ μ •μƒμ μΌλ΅ ν‘μ‹λλ‹¤.', () => {
      cy.visit("http://localhost:3000/");
    });
  });
  ```

  - `describe`: ν…μ¤νΈ κ·Έλ£Ή
  - `it`: ν…μ¤νΈ μ‹λ‚λ¦¬μ¤

### cypress μ‹¤ν–‰

- cypressλ¥Ό μ‹¤ν–‰ν•λ©΄ cypressκ°€ μ‘μ„±ν• ν…μ¤νΈ νμΌμ„ μΈμ‹ν•λ” κ²ƒμ„ ν™•μΈν•  μ μλ‹¤.

  |                                                   cypress μ‹¤ν–‰ κ²°κ³Ό                                                   |
  | :-------------------------------------------------------------------------------------------------------------------: |
  | <img width="500" alt="Image" src="https://github.com/user-attachments/assets/d672a5c9-12c9-4876-9ae9-e1b12159ac97" /> |

- ν…μ¤νΈ νμΌμ„ μ„ νƒν•λ©΄ λ‹¤μκ³Ό κ°™μ΄ ν…μ¤νΈκ°€ μ •μƒμ μΌλ΅ μ‹¤ν–‰λλ” λ¨μµμ„ ν™•μΈν•  μ μλ‹¤.

  |                                                   ν…μ¤νΈ μ‹¤ν–‰ κ²°κ³Ό                                                    |
  | :-------------------------------------------------------------------------------------------------------------------: |
  | <img width="500" alt="Image" src="https://github.com/user-attachments/assets/e4338a83-0f94-4f6e-8ece-381c7aa277ac" /> |

### cypress UI

- cypressμ UIλ” λ‹¤μκ³Ό κ°™λ‹¤.

  - Test Bodyμ κ° λ‹¨κ³„μ— λ§μ°μ¤λ¥Ό νΈλ²„ν•λ©΄ κ° λ‹¨κ³„λ³„ κ²°κ³Όλ¥Ό ν™•μΈν•  μ μλ„λ΅ ν™”λ©΄μ„ μ μ–΄ν•λ‹¤.
  - μ°μΈ΅μ—λ” ν…μ¤νΈ κ²°κ³Όλ¥Ό ν™•μΈν•  μ μλ” λ―Έλ¦¬λ³΄κΈ°λ„ μ κ³µν•λ‹¤.
  - Chrome λΈλΌμ°μ €μ—μ„ μ κ³µν•λ” κ°λ°μ λ„κµ¬ μ—­μ‹ μ‚¬μ©ν•  μ μλ‹¤. [command(β) + option(β¥) + i]

  |                                                   ν…μ¤νΈ μ„±κ³µ μ‹ UI                                                   |
  | :-------------------------------------------------------------------------------------------------------------------: |
  | <img width="500" alt="Image" src="https://github.com/user-attachments/assets/639c3071-f137-4027-9e77-9fa6a8f83a52" /> |

- λ§μ•½ μ—λ¬κ°€ λ°μƒν•λ‹¤λ©΄, cypressλ” μ—λ¬κ°€ λ°μƒν• μ„μΉμ™€ κ·Έ μ΄μ λ¥Ό μ•λ ¤μ¤€λ‹¤.

  |                                                    μ—λ¬ λ°μƒ μ‹ UI                                                    |
  | :-------------------------------------------------------------------------------------------------------------------: |
  | <img width="500" alt="Image" src="https://github.com/user-attachments/assets/25eb7b2f-0a7a-4c78-8231-fc66ac7013a7" /> |

### cypress eslint ν™κ²½ κµ¬μ„±

> **μ°Έκ³ ** : [Cypress ESLint Plugin Github Repository](https://github.com/cypress-io/eslint-plugin-cypress)

- cypress eslint pluginμ„ μ„¤μΉν•λ‹¤.

  > **β οΈ μ¤‘μ”** Cypress ESLint Pluginμ€ ESLint V9 μ΄μƒλ§ μ§€μ›ν•κΈ° λ•λ¬Έμ— μ΄μ „ λ²„μ „μ΄λΌλ©΄ **λ°λ“μ‹** μ—…λ°μ΄νΈκ°€ ν•„μ”ν•λ‹¤.

  ```bash
  npm install eslint eslint-plugin-cypress --save-dev
  ```

- `eslint.config.*js` νμΌμ μƒλ‹¨μ— `pluginCypress`λ¥Ό `import` ν•λ‹¤.

  ```js
  import pluginCypress from 'eslint-plugin-cypress/flat';
  ```

- recommended rulesλ¥Ό μ¶”κ°€ν•κΈ° μ„ν•΄ λ‹¤μ μ½”λ“λ¥Ό `eslint.config.*js` νμΌμ— μ¶”κ°€ν•λ‹¤.

  ```js
  import pluginCypress from 'eslint-plugin-cypress/flat';

  export default [
    ...
    pluginCypress.configs.recommended,
    ...
    {
      rules: {
        'cypress/no-unnecessary-waiting': 'off'
      }
    }
  ]
  ```

---

## 4. λ―Έλ‹ ν”„λ΅μ νΈ

### κ°„λ‹¨ν• Counter μ•± μ μ‘

- ν…μ¤νΈ μ½”λ“ μ‘μ„±μ„ μ„ν•΄ κ°„λ‹¨ν• Counter μ»΄ν¬λ„νΈλ¥Ό μƒμ„±ν•λ‹¤.

  ```jsx
  const Counter = () => {
    const [counter, setCounter] = useState(0);

    const handleIncrease = () => {
      setCounter(counter + 1);
    };

    const handleDecrease = () => {
      setCounter(counter - 1);
    };

    return (
      <div>
        <p>{counter}</p>
        <button type="button" onClick={handleIncrease}>
          +
        </button>
        <button type="button" onClick={handleDecrease}>
          -
        </button>
      </div>
    );
  };
  ```

### μ²« λ²μ§Έ ν…μ¤νΈ μ½”λ“ μ‘μ„±

> π¨ E2E ν…μ¤νΈ μ½”λ“λ¥Ό μ‘μ„±ν•  λ•μ—λ” μ‘μ„±ν• μ½”λ“ κΈ°λ°μ΄ μ•„λ‹λΌ **μ‚¬μ©μ κ΄€μ μ—μ„ μ½”λ“λ¥Ό μ‘μ„±**ν•΄μ•Ό ν•λ‹¤!!
> - μ‚¬μ©μ κ΄€μ μ—μ„ μ‘μ„±λ ν…μ¤νΈ μ‹λ‚λ¦¬μ¤μ— μ§‘μ¤‘ν•λ‹¤.
> - μ½”λ“λ¥Ό λ³΄κ³  μ •μƒμ μΌλ΅ λ™μ‘ν•λ”μ§€ ν™•μΈν•λ” κ²ƒμ΄ **μ•„λ‹λ‹¤**.
> - μ‚¬μ©μκ°€ μ…λ ¥ν•κ³  μΈν„°λ ‰μ… ν–μ„ λ• μ‚¬μ©μκ°€ κΈ°λ€ν•λ” κ²°κ³Όλ¥Ό ν…μ¤νΈ μ½”λ“λ΅ ν’€μ–΄λ‚΄λ” κ²ƒμ΄λ‹¤.
> - μ΄ μ‹λ®¬λ μ΄μ…μ„ μλ™ν™”ν•¨μΌλ΅μ¨ **"μ„λΉ„μ¤κ°€ μ •μƒμ μΌλ΅ λ™μ‘ν•λ”μ§€ μ—¬λ¬ λ…μ μ‚¬μ©μκ°€ ν™•μΈν•λ‹¤"**λ” κ΄€μ μ—μ„ ν…μ¤νΈ μ½”λ“λ¥Ό μ‘μ„±ν•΄μ•Ό ν•λ‹¤.

<br />

- **cypress/e2e** ν΄λ” λ‚΄λ¶€μ— `counter.cy.js`λΌλ” μ΄λ¦„μ ν…μ¤νΈ νμΌμ„ μƒμ„±ν•λ‹¤.

- ν…μ¤νΈ μ½”λ“λ¥Ό μ‘μ„±ν•λ‹¤.

  β‘  ν…μ¤νΈλ¥Ό μ„ν•΄ DOM μ”μ†(Element)λ΅ μ ‘κ·Όν•΄μ•Ό ν•λ”λ°, μ–΄λ–¤ DOM μ”μ†μΈμ§€ λ…ν™•ν ν•κΈ° μ„ν•΄ `data-cy`λΌλ” ν…μ¤νΈμ© IDλ¥Ό λ¶€μ—¬ν•λ‹¤.

  ```jsx
  <p data-cy="counter">{counter}</p>
  ```

  β‘΅ `cy.get()` λ©”μ„λ“λ¥Ό μ‚¬μ©ν•μ—¬ DOM μ”μ†λ¥Ό λ¶λ¬μ¨λ‹¤.

  - `cy.get(selector)`: νμ΄μ§€μ— μλ” μ”μ†λ¥Ό λ¶λ¬μ¤λ” cypress λ©”μ„λ“

    |                                                      `cy.get()`                                                       |
    | :-------------------------------------------------------------------------------------------------------------------: |
    | <img width="500" alt="Image" src="https://github.com/user-attachments/assets/0cf3b338-cd1d-4c25-8e95-6b68a4f0488c" /> |

  - `data-cy`κ°€ `counter`μΈ μ”μ†λ¥Ό λ¶λ¬μ™€μ„ ν•΄λ‹Ή μ”μ†κ°€ `0`μ„ κ°€μ§€κ³  μλ”μ§€ ν™•μΈν•λ‹¤.

    ```js
    cy.get('[data-cy=counter]').contains(0);
    ```

  - μ „μ²΄ ν…μ¤νΈ μ½”λ“λ” λ‹¤μκ³Ό κ°™λ‹¤.

    ```js
    describe('Counter μ•±', () => {
      // μ²« λ²μ§Έ ν…μ¤νΈ μ‹λ‚λ¦¬μ¤ - λ°μ΄ν„°κ°€ μ •μƒμ μΌλ΅ ν‘μ‹λμ—λ”μ§€
      it('νμ΄μ§€μ— μ§„μ…ν•λ©΄ Counter μ•±μ΄ μ •μƒμ μΌλ΅ μ‹¤ν–‰λλ‹¤: 0μ΄ ν‘μ‹λλ‹¤.', () => {
        cy.visit('http://localhost:3000');

        // νμ΄μ§€μ— μλ” μ”μ†λ¥Ό λ¶λ¬μ¤λ” cypress λ©”μ„λ“
        cy.get('[data-cy=counter]').contains(0);
      });
    });
    ```

    |                                                   ν…μ¤νΈ μ‹¤ν–‰ κ²°κ³Ό                                                    |
    | :-------------------------------------------------------------------------------------------------------------------: |
    | <img width="500" alt="Image" src="https://github.com/user-attachments/assets/e433abe7-cd50-48d6-924b-3494240a54f5" /> |

### λ‘ λ²μ§Έ ν…μ¤νΈ μ½”λ“ μ‘μ„±

- λ²„νΌ λ™μ‘μ„ ν…μ¤νΈν•κΈ° μ„ν• ν…μ¤νΈ μ½”λ“λ¥Ό μ‘μ„±ν•λ‹¤.

  β‘  `counter` μ”μ†μ™€ λ§μ°¬κ°€μ§€λ΅, λ²„νΌμ—λ„ `data-cy`λΌλ” cypressλ¥Ό μ„ν• ν…μ¤νΈμ© IDλ¥Ό λ¶€μ—¬ν•λ‹¤.

  - λ¬Όλ΅  κΈ°μ΅΄μ `id` μ†μ„±μ„ μ΄μ©ν•΄λ„ λ™μΌν•κ² λ™μ‘ν•μ§€λ§, λΉ„μ¦λ‹μ¤ λ΅μ§κ³Όλ„ κ²ΉμΉ  μ μκΈ° λ•λ¬Έμ— ν…μ¤νΈ μ½”λ“ μ „μ© IDλ¥Ό λ¶€μ—¬ν•λ” κ²ƒμ΄ κ³µμ‹λ¬Έμ„μ—μ„ μ μ‹ν•λ” Best-Practiceμ΄λ‹¤.

    ```jsx
    <button type="button" data-cy="plus-button" onClick={handleIncrease}>
      +
    </button>
    <button type="button" data-cy="minus-button" onClick={handleDecrease}>
      -
    </button>
    ```

  β‘΅ `cy.click()` λ©”μ„λ“λ¥Ό μ‚¬μ©ν•μ—¬ μ”μ†μ ν΄λ¦­μ„ μ‹λ®¬λ μ΄μ… ν•λ‹¤.

  - `cy.click()`: νμ΄μ§€μ— μλ” μ”μ†μ ν΄λ¦­μ„ μ‹λ®¬λ μ΄μ… ν•λ” cypress λ©”μ„λ“

    |                                                     `cy.click()`                                                      |
    | :-------------------------------------------------------------------------------------------------------------------: |
    | <img width="500" alt="image" src="https://github.com/user-attachments/assets/e6345984-970d-47bf-a7b3-1f76798b7426" /> |

  - `data-cy`κ°€ `plus-button`μΈ μ”μ†λ¥Ό λ¶λ¬μ™€μ„ μ”μ†μ ν΄λ¦­μ„ μ‹λ®¬λ μ΄μ… ν•λ‹¤.

    ```js
    cy.get('[data-cy=plus-button]').click();
    ```

  - `counter` μ”μ†μ λ°μ΄ν„°κ°€ `1` μ¦κ°€ν–λ”μ§€ ν™•μΈν•λ‹¤.

    ```js
    cy.get('[data-cy=counter]').contains(1);
    ```

  - μ „μ²΄ ν…μ¤νΈ μ½”λ“λ” λ‹¤μκ³Ό κ°™λ‹¤. λ§μ΄λ„μ¤ λ²„νΌμ μ‹λ‚λ¦¬μ¤λ„ ν”λ¬μ¤ λ²„νΌκ³Ό λ™μΌν•λ‹¤.

    ```js
    // λ‘ λ²μ§Έ ν…μ¤νΈ μ‹λ‚λ¦¬μ¤ - ν”λ¬μ¤ λ²„νΌμ„ λ„λ¥΄λ©΄ λ°μ΄ν„°κ°€ μ¦κ°€ν•λ”μ§€
    it('ν”λ¬μ¤ λ²„νΌμ„ λ„λ¥΄λ©΄ counterκ°€ 1 μ¦κ°€ν•λ‹¤.', () => {
      cy.visit('http://localhost:3000');

      // μ”μ† ν΄λ¦­μ„ μ‹λ®¬λ μ΄μ… ν•λ” cypress λ©”μ„λ“
      cy.get('[data-cy=plus-button]').click();
      cy.get('[data-cy=counter]').contains(1);
    });

    // μ„Έ λ²μ§Έ ν…μ¤νΈ μ‹λ‚λ¦¬μ¤ - λ§μ΄λ„μ¤ λ²„νΌμ„ λ„λ¥΄λ©΄ λ°μ΄ν„°κ°€ κ°μ†ν•λ”μ§€
    it('λ§μ΄λ„μ¤ λ²„νΌμ„ λ„λ¥΄λ©΄ counterκ°€ 1 κ°μ†ν•λ‹¤.', () => {
      cy.visit('http://localhost:3000');

      // μ”μ† ν΄λ¦­μ„ μ‹λ®¬λ μ΄μ… ν•λ” cypress λ©”μ„λ“
      cy.get('[data-cy=minus-button]').click();
      cy.get('[data-cy=counter]').contains(-1);
    });
    ```

    |                                                   ν…μ¤νΈ μ‹¤ν–‰ κ²°κ³Ό                                                    |
    | :-------------------------------------------------------------------------------------------------------------------: |
    | <img width="500" alt="image" src="https://github.com/user-attachments/assets/0133dabb-84e2-4241-9adb-5296a939880c" /> |

---

## 5. μ»¤μ¤ν…€ μ»¤λ§¨λ“μ™€ κ³µν†µ ν›…

### κ³µν†µ ν›…μΌλ΅ λ°λ³µλλ” μ½”λ“ μ¤„μ΄κΈ°

- `beforeEach`λ¥Ό μ‚¬μ©ν•΄ λ°λ³µλλ” μ½”λ“λ¥Ό μ κ±°ν•λ‹¤.

  - `beforeEach`: `describe`λΌλ” ν…μ¤νΈ κ·Έλ£Ή λ‚΄μ λ¨λ“  μ½”λ“λ¥Ό μ‹¤ν–‰ν•κΈ° μ „μ— `beforeEach` λ‚΄λ¶€μ μ½”λ“κ°€ μ‹¤ν–‰λλ‹¤.

    ```js
    beforeEach(() => {
      // ν„μ¬ κ·Έλ£Ήν•‘λ describe μ•μ λ¨λ“  ν…μ¤νΈ μ½”λ“κ°€ μ‹¤ν–‰λκΈ° μ „μ— μ‹¤ν–‰ν•κ³  μ‹¶μ€ λ΅μ§μ„ μ¶”κ°€
      cy.visit('http://localhost:3000');
    });
    ```

  - λ‚λ¨Έμ§€ ν…μ¤νΈ μ½”λ“μ—μ„ κ³µν†µμΌλ΅ λ¬¶μ€ μ½”λ“λ¥Ό μ κ±°ν•λ‹¤.

    ```js
    describe('Counter μ•±', () => {
      beforeEach(() => {
        // ν„μ¬ κ·Έλ£Ήν•‘λ describe μ•μ λ¨λ“  ν…μ¤νΈ μ½”λ“κ°€ μ‹¤ν–‰λκΈ° μ „μ— μ‹¤ν–‰ν•κ³  μ‹¶μ€ λ΅μ§μ„ μ¶”κ°€
        cy.visit('http://localhost:3000');
      });
    
      // μ²« λ²μ§Έ ν…μ¤νΈ μ‹λ‚λ¦¬μ¤ - λ°μ΄ν„°κ°€ μ •μƒμ μΌλ΅ ν‘μ‹λμ—λ”μ§€
      it('νμ΄μ§€μ— μ§„μ…ν•λ©΄ Counter μ•±μ΄ μ •μƒμ μΌλ΅ μ‹¤ν–‰λλ‹¤: 0μ΄ ν‘μ‹λλ‹¤.', () => {
        // νμ΄μ§€μ— μλ” μ”μ†λ¥Ό λ¶λ¬μ¤λ” cypress λ©”μ„λ“
        cy.get('[data-cy=counter]').contains(0);
      });
    
      // λ‘ λ²μ§Έ ν…μ¤νΈ μ‹λ‚λ¦¬μ¤ - ν”λ¬μ¤ λ²„νΌμ„ λ„λ¥΄λ©΄ λ°μ΄ν„°κ°€ μ¦κ°€ν•λ”μ§€
      it('ν”λ¬μ¤ λ²„νΌμ„ λ„λ¥΄λ©΄ counterκ°€ 1 μ¦κ°€ν•λ‹¤.', () => {
        // μ”μ† ν΄λ¦­μ„ μ‹λ®¬λ μ΄μ… ν•λ” cypress λ©”μ„λ“
        cy.get('[data-cy=plus-button]').click();
        cy.get('[data-cy=counter]').contains(1);
      });
    
      // μ„Έ λ²μ§Έ ν…μ¤νΈ μ‹λ‚λ¦¬μ¤ - λ§μ΄λ„μ¤ λ²„νΌμ„ λ„λ¥΄λ©΄ λ°μ΄ν„°κ°€ κ°μ†ν•λ”μ§€
      it('λ§μ΄λ„μ¤ λ²„νΌμ„ λ„λ¥΄λ©΄ counterκ°€ 1 κ°μ†ν•λ‹¤.', () => {
        // μ”μ† ν΄λ¦­μ„ μ‹λ®¬λ μ΄μ… ν•λ” cypress λ©”μ„λ“
        cy.get('[data-cy=minus-button]').click();
        cy.get('[data-cy=counter]').contains(-1);
      });
    });
    ```

  - ν…μ¤νΈ μ‹¤ν–‰ κ²°κ³Όλ” μ΄μ „κ³Ό λ™μΌν•λ‹¤.

    |                                                   ν…μ¤νΈ μ‹¤ν–‰ κ²°κ³Ό                                                    |
    | :-------------------------------------------------------------------------------------------------------------------: |
    | <img width="500" alt="image" src="https://github.com/user-attachments/assets/8c741b9a-6bda-46d8-970f-a64e973cefd7" /> |


### cypress κ³µν†µ ν›…

> **μ°Έκ³ **: [cypress hooks κ³µμ‹λ¬Έμ„](https://docs.cypress.io/app/core-concepts/writing-and-organizing-tests#Hooks)

```js
describe('Hooks', () => {
  before(() => {
    // runs once before all tests in the block
  });

  beforeEach(() => {
    // runs before each test in the block
  });

  afterEach(() => {
    // runs after each test in the block
  });

  after(() => {
    // runs once after all tests in the block
  });
});
```

- `before` : `describe` λ‚΄λ¶€μ λ¨λ“  ν…μ¤νΈ μ½”λ“λ¥Ό μ‹¤ν–‰λκΈ° μ „μ— **ν• λ²λ§** μ‹¤ν–‰ν•λ” μ½”λ“λ¥Ό μ‘μ„±

- `beforeEach` : `describe` λ‚΄λ¶€μ **κ°κ°μ** ν…μ¤νΈ μ½”λ“λ¥Ό μ‹¤ν–‰ν•κΈ° μ „μ— **λ°λ³µν•΄μ„** μ‹¤ν–‰ν•λ” μ½”λ“λ¥Ό μ‘μ„±

- `afterEach` : `describe` λ‚΄λ¶€μ **κ°κ°μ** ν…μ¤νΈ μ½”λ“λ¥Ό μ‹¤ν–‰ν• ν›„ **λ°λ³µν•΄μ„** μ‹¤ν–‰ν•λ” μ½”λ“λ¥Ό μ‘μ„±

- `after` : `describe` λ‚΄λ¶€μ λ¨λ“  ν…μ¤νΈ μ½”λ“λ¥Ό μ‹¤ν–‰ν• ν›„ **ν• λ²λ§** μ‹¤ν–‰ν•λ” μ½”λ“λ¥Ό μ‘μ„±

### cypress μ»¤μ¤ν…€ μ»¤λ§¨λ“

> **μ°Έκ³ **: [cypress μ»¤μ¤ν…€ μ»¤λ§¨λ“ κ³µμ‹λ¬Έμ„](https://docs.cypress.io/api/cypress-api/custom-commands)
>
> - `Cypress.Commands.add()`: μƒλ΅μ΄ μ»¤μ¤ν…€ μ»¤λ§¨λ“λ¥Ό μ¶”κ°€ν•λ” api
> - `Cypress.Commands.overwrite()`: κΈ°μ΅΄ apiλ¥Ό λ®μ–΄μ¨μ„ λ‚λ§μ λ΅μ§μ„ μ‘μ„±ν•λ” api
>   - `overwrite`λ¥Ό μ‚¬μ©ν•΄ cypressμ—μ„ μ κ³µν•λ” apiμ κ·κ²©, μ„±μ§, λ™μ‘μ΄ λ°”λ€λ‹¤λ©΄ μμΈ΅ λ¶κ°€λ¥ν• μ½”λ“κ°€ λ  μ μμΌλ―€λ΅ κ¶μ¥ν•μ§€ μ•λ”λ‹¤.
> - cypress μ»¤μ¤ν…€ μ»¤λ§¨λ“λ¥Ό μ΄μ©ν•΄ μ£Όλ΅ λ΅κ·ΈμΈ μΈμ¦ λ“±μ μλ™ν™”κ°€ μ£Όλ΅ μ΄λ£¨μ–΄μ§„λ‹¤.

- ν„μ¬ μ‘μ„±λ ν…μ¤νΈ μ½”λ“μ—μ„λ” `data-cy`λΌλ” λ¶€λ¶„μ΄ κ³„μ†ν•΄μ„ λ°λ³µλκ³  μλ‹¤.

  |                                                  λ°λ³µλλ” `data-cy`                                                   |
  | :-------------------------------------------------------------------------------------------------------------------: |
  | <img width="300" alt="image" src="https://github.com/user-attachments/assets/005ad07b-4660-448b-a49f-f804b1ed3616" /> |

  - κ°„λ‹¨ν• μ• ν”λ¦¬μΌ€μ΄μ…μ΄λΌλ©΄ κ΄μ°®κ² μ§€λ§, μ• ν”λ¦¬μΌ€μ΄μ…μ΄ μ»¤μ§μλ΅ λ³µμ΅ν•κ³  λ§μ€ μ”μ†λ“¤μ΄ ν‘ν„λκ³  μΈν„°λ ‰μ… λν• ν›¨μ”¬ λ§μ„ κ²ƒμ΄λ―€λ΅ `data-cy` κ°™μ€ ν…μ¤νΈ IDκ°€ ν…μ¤νΈ μ½”λ“μ—μ„ κ³„μ† λ°λ³µλλ‹¤λ©΄ κµ‰μ¥ν κ°€λ…μ„±μ΄ λ–¨μ–΄μ§ κ²ƒμ΄λ‹¤.

- cypress μ»¤μ¤ν…€ μ»¤λ§¨λ“λ¥Ό μ΄μ©ν•΄ ν¨μ¨μ μΈ μ½”λ“λ¥Ό μ‘μ„±ν•λ‹¤.

  - cypressλ¥Ό μ²μ μ‹¤ν–‰ν–μ„ λ• μƒμ„±λ **support** ν΄λ” μ•„λμ— `command.js`λΌλ” νμΌμ΄ μ΅΄μ¬ν•λ‹¤.

    |                                             `/cypress/support/command.js`                                             |
    | :-------------------------------------------------------------------------------------------------------------------: |
    | <img width="200" alt="image" src="https://github.com/user-attachments/assets/86e4c271-c94a-4bbf-bc53-215555284323" /> |

  - λ°λ³µμ μΈ `data-cy` μ‚¬μ©μ„ μ¤„μ΄κΈ° μ„ν• apiλ¥Ό μ¶”κ°€ν•λ‹¤.

    - μ”μ†μ— λ¶€μ—¬ν• ν…μ¤νΈ IDλ¥Ό `text`λ΅ μ…λ ¥ λ°›μ•„ κΈ°μ΅΄μ— λ°λ³µμ μΌλ΅ μ‚¬μ©ν•λ `cy.get` apiλ¥Ό `return`ν•λ‹¤.

      ```js
      Cypress.Commands.add('getByCy', (text) => {
        return cy.get(`[data-cy=${text}]`);
      });
      ```

    - μƒμ„±ν• `getByCy` apiλ΅ ν…μ¤νΈ μ½”λ“μ `cy.get('[data-cy=ν…μ¤νΈID]')` λ¶€λ¶„μ„ λ€μ²΄ν•λ‹¤.

      ```js
      it('νμ΄μ§€μ— μ§„μ…ν•λ©΄ Counter μ•±μ΄ μ •μƒμ μΌλ΅ μ‹¤ν–‰λλ‹¤: 0μ΄ ν‘μ‹λλ‹¤.', () => {
        // before
        cy.get('[data-cy=counter]').contains(0);

        // after
        cy.getByCy('counter').contains(0);
      });
      ```

- ν…μ¤νΈκ°€ μ •μƒμ μΌλ΅ λ™μ‘ν•λ” κ²ƒμ„ ν™•μΈν•  μ μλ‹¤.

  |                                                   ν…μ¤νΈ μ‹¤ν–‰ κ²°κ³Ό                                                    |
  | :-------------------------------------------------------------------------------------------------------------------: |
  | <img width="500" alt="image" src="https://github.com/user-attachments/assets/5b79670c-3da0-4bc2-af45-6952f63674ee" /> |

### μ»¤μ¤ν…€ μ»¤λ§¨λ“ ν•¨μλ¥Ό λ‹¤λ£° λ• μ μν•  μ 

- κ°λ°μ κ²½ν—μ„ μ €ν•μ‹ν‚¨λ‹¤.

  - cypressμ—μ„ μ κ³µν•λ” apiλ¥Ό μ‚¬μ©ν•λ©΄ λ‹¤μκ³Ό κ°™μ΄ ν•΄λ‹Ή μ”μ†μ— λ§λ” apiκ°€ μλ™μ™„μ„±λλ©°, apiμ— λ€ν• μ„¤λ… λν• ν™•μΈν•  μ μλ‹¤.
    

    |                                                   cypress api μ‚¬μ©                                                    |
    | :-------------------------------------------------------------------------------------------------------------------: |
    | <img width="300" alt="image" src="https://github.com/user-attachments/assets/cea9a93f-ccce-4863-b99e-34a1436c1d4f" /> |

  - ν•μ§€λ§ μ»¤μ¤ν…€ μ»¤λ§¨λ“λ¥Ό μ΄μ©ν•  κ²½μ° μ°Ύμ€ μ”μ†μ— ν™μ©ν•  μ μλ” apiλ¥Ό ν™•μΈν•  μ μ—†λ‹¤.

    - μ΄λ” `getByCy` apiμ λ°ν™ νƒ€μ…μ΄ μ„¤μ •λμ§€ μ•μ•κΈ° λ•λ¬ΈμΈλ°, TypeScript κΈ°λ°μ cypress ν™κ²½μ—μ„ νƒ€μ…μ„ μ§€μ •ν•λ©΄ ν™μ©ν•  μ μλ‹¤.
    <br />
    
    |                                                  μ»¤μ¤ν…€ μ»¤λ§¨λ“ μ‚¬μ©                                                   |
    | :-------------------------------------------------------------------------------------------------------------------: |
    | <img width="300" alt="image" src="https://github.com/user-attachments/assets/07078cd4-c300-40aa-bff8-ece3163346a4" /> |

- μ»¤μ¤ν…€ μ»¤λ§¨λ“κ°€ μ–΄λ–¤ μ—­ν• μ„ ν•λ”μ§€ μ λ“λ¬λ‚μ§€ μ•λ”λ‹¤.

  - μ΄λ” μ‹¤λ¬΄μ—μ„ μ§€μ–‘ν•΄μ•Ό ν•λ” μ½”λ“ μ‘μ„±λ²•μ΄λ©°, μλ„λ¥Ό λ‹΄μ•„μ„ μ‘μ„±ν• μ½”λ“μ—λ” μ£Όμ„μ„ λ‹¬μ•„μ£Όλ” κ²ƒμ΄ μ¤‘μ”ν•λ‹¤.

  - μ‘μ„±ν• μ»¤μ¤ν…€ μ»¤λ§¨λ“μ— JSDoc λ°©μ‹μΌλ΅ μ£Όμ„μ„ λ‹¬μ•„ ν•΄λ‹Ή μ½”λ“κ°€ μ–΄λ–¤ μ—­ν• μ„ ν•λ©°, μ–΄λ–¤ λ§¤κ°λ³€μλ¥Ό ν•„μ”λ΅ ν•λ”μ§€ λ“±μ„ μ‘μ„±ν•λ” κ²ƒμ΄ μΆ‹λ‹¤.

    ```js
    /**
     * @description data-cyλ΅ μ„¤μ •λ μ”μ†λ¥Ό μ‰½κ² μ°Ύμ„ μ μλ” μ»¤μ¤ν…€ api
     * @param {string} text - `data-cy` κ°’μΌλ΅ μ‚¬μ©ν•  μ”μ†μ ν…μ¤νΈ ID
     * @returns {Cypress.Chainable} - μ„ νƒλ DOM μ”μ†λ¥Ό λ°ν™
     *
     * @example
     * cy.getByCy('plus-button').click();
     */
    Cypress.Commands.add('getByCy', (text) => {
      return cy.get(`[data-cy=${text}]`);
    });
    ```

---

## 6. μ‹¤μ „ ν”„λ΅μ νΈ - Part 1

### μ‹¤μ „ ν”„λ΅μ νΈ

- μ‹¤μ „ ν”„λ΅μ νΈμ—μ„λ” μ•„λ μ΄λ―Έμ§€μ™€ κ°™μ€ μƒν’ λ©λ΅ νμ΄μ§€μ— λ€ν• ν…μ¤νΈ μ½”λ“λ¥Ό μ‘μ„±ν•λ‹¤.

  |                                                   μƒν’ λ©λ΅ νμ΄μ§€                                                    |
  | :-------------------------------------------------------------------------------------------------------------------: |
  | <img width="300" alt="image" src="https://github.com/user-attachments/assets/29383fd7-9b31-4b31-9c4a-9ba6e84b3735" /> |

### μ²« λ²μ§Έ ν…μ¤νΈ μ½”λ“ μ‘μ„±

- λ¨Όμ € μ–΄λ–¤ κ²ƒμ„ ν…μ¤νΈν• μ§€ **ν…μ¤νΈ μ‹λ‚λ¦¬μ¤**λ¥Ό μ‘μ„±ν•λ‹¤.

  - **ν…μ¤νΈ μ‹λ‚λ¦¬μ¤**: μ‚¬μ©μ κ΄€μ μ—μ„ λ°μƒν•λ” λ™μ‘κ³Ό ν•λ‚μ ν”λ΅μ°
  <br />
  
  > β‘  νμ΄μ§€μ— μ§„μ…ν–μ„ λ• μƒν’λ“¤μ΄ ν™”λ©΄μ— μ ν‘μ‹λμ–΄μ•Ό ν•λ‹¤.

  - `/cypress/e2e` ν΄λ” λ‚΄λ¶€μ— `product-page.cy.js`λΌλ” ν…μ¤νΈ νμΌμ„ μƒμ„±ν•λ‹¤. νμΌ μ΄λ¦„μ€ μ†λ¬Έμλ΅ μ‘μ„±ν•λ©°, λ‘ λ‹¨μ–΄ μ΄μƒμ€ ν•μ΄ν”(-)μΌλ΅ μ—°κ²°ν•λ‹¤.

    |                                                   μƒν’ λ©λ΅ νμ΄μ§€                                                    |
    | :-------------------------------------------------------------------------------------------------------------------: |
    | <img width="200" alt="image" src="https://github.com/user-attachments/assets/dd60d4a3-5288-4fff-a283-a0cad323e153" /> |

  - μƒν’ λ©λ΅ μ»΄ν¬λ„νΈμ—μ„ μƒν’(item)μ— cypress ν…μ¤νΈ IDλ¥Ό λ¶€μ—¬ν•λ‹¤.

    ```jsx
    {
      products &&
        products.map(({ imageUrl, name, id }, index) => {
          return (
            <li data-cy="product-item" className={styles.item} key={index}>
              <Link href={`/products/${id}`}>
                <div>
                  <Image src={imageUrl} width={300} height={300} alt={name} />
                </div>
                <div>{name}</div>
              </Link>
            </li>
          );
        }
      );
    }
    ```

  - νμ΄μ§€μ— μ§„μ…ν–μ„ λ• `product-item`μ΄λΌλ” κ°’μ΄ μ΅΄μ¬ν•λ”μ§€ ν™•μΈν•λ‹¤.

    - `should`: λ°›μ•„μ¨ μ”μ†κ°€ "κΌ­ μ–΄λ–¤ μ”μ†μ—¬μ•Ό ν•λ‹¤"λΌλ” api

      - λ‹¤μ–‘ν• μµμ…μ΄ μλ”λ°, μ—¬κΈ°μ„λ” **"ν™”λ©΄μ— μμ–΄μ•Ό ν•λ‹¤"**λΌλ” μλ―Έμ `be.visible`μ„ μ‚¬μ©ν•λ‹¤.

    ```js
    describe('μƒν’ λ©λ΅ νμ΄μ§€', () => {
      // μ²« λ²μ§Έ ν…μ¤νΈ μ‹λ‚λ¦¬μ¤
      it('νμ΄μ§€μ— μ§„μ…ν–μ„ λ• μƒν’ λ©λ΅μ΄ ν‘μ‹λλ‹¤.', () => {
        cy.visit('http://localhost:3000');
        cy.getByCy('product-item').should('be.visible');
      });
    });
    ```

  - ν…μ¤νΈ μ‹¤ν–‰ κ²°κ³Όλ” λ‹¤μκ³Ό κ°™λ‹¤.

    |                                                   ν…μ¤νΈ μ‹¤ν–‰ κ²°κ³Ό                                                    |
    | :-------------------------------------------------------------------------------------------------------------------: |
    | <img width="500" alt="image" src="https://github.com/user-attachments/assets/997270d5-0571-42ac-86f8-a56702a5bc77" /> |


### ν…μ¤νΈ μ½”λ“ μ„¤κ³„ λ°©λ²• ν

- TDD: ν…μ¤νΈ μ£Όλ„ κ°λ° (Test Driven Development)

  - ν…μ¤νΈ μ½”λ“λ¥Ό μ„¤κ³„ν•  λ• κΈ°λ¥μ„ λ¨λ‘ κµ¬ν„ν• λ‹¤μμ— ν…μ¤νΈ μ½”λ“λ¥Ό μ‘μ„±ν•λ” κ²ƒμ΄ μ•„λ‹λΌ **λ¨Όμ € ν…μ¤νΈ μ½”λ“λ¥Ό μ‘μ„±ν• λ‹¤μμ— κΈ°λ¥μ„ κµ¬ν„**ν•λ” λ°©λ²•

    1. μ„μ μμ‹μ—μ„, μ»΄ν¬λ„νΈ κ°λ° μ „μ—λ” νμ΄μ§€μ— μ–΄λ–¤ μ”μ†λ„ μ΅΄μ¬ν•μ§€ μ•μΌλ―€λ΅ `should` μµμ…μ„ `not.be.visible`λ΅ μ„¤μ •ν•λ‹¤.

    2. μ»΄ν¬λ„νΈμ™€ κΈ°λ¥μ΄ κ°λ°λκ³  λ‚λ©΄ **1) ν…μ¤νΈ μΌ€μ΄μ¤λ” μ‹¤ν¨ν•  κ²ƒμ΄λ―€λ΅** `should` μµμ…μ„ `be.visible`λ΅ λ³€κ²½ν•λ‹¤.

  - μ΄μ²λΌ μ‹¤ν¨ν•λ” μΌ€μ΄μ¤μ— λ€ν• ν…μ¤νΈ μ½”λ“λ¥Ό μ„¤κ³„ν• ν›„ κΈ°λ¥λ“¤μ„ λ¶™μ΄λ©΄μ„ κ·Έ ν…μ¤νΈ μ½”λ“κ°€ μ„±κ³µν•κ²λ” λ°”κΏ”λ‚κ°€λ” λ°©μ‹μ„ TDDλΌκ³  ν•λ‹¤.

  - **λ‹¨μ **

    - ν„μ‹¤μ μ΄μ§€ λ»ν•κ³  μ‹¤μ©μ μ΄μ§€ μ•λ‹¤.

      - λΉ λ¥΄κ² λΉ„μ¦λ‹μ¤ λ¨λΈμ„ μ…μ¦/κ²€μ¦ν•΄μ•Ό ν•λ” μ…μ¥μ—μ„, ν…μ¤νΈκΉμ§€ κ²Έν•λ©° μ§„ν–‰ν•κΈ°μ—λ” μ†λ„κ°μ΄ λ–¨μ–΄μ§€κ³  μ „λ°μ μΈ μ‚¬μ΄ν΄μ΄ κΈΈμ–΄μ§€κ² λμ–΄ λ¬΄λ¦¬κ°€ κ° κ²ƒμ΄λ‹¤.

    - λν• λΉ λ¥΄κ² μ‚¬μ©μ ν”Όλ“λ°±μ„ λ°μν•΄ μ κΈ°μ μΌλ΅ μ„λΉ„μ¤λ¥Ό λ°”κΏ” λ‚κ°€μ•Όν•λ” μ…μ¥μ—μ„ ν…μ¤νΈ μ½”λ“κ°€ λ°λ©μ„ μ΅μ•„ μ†λ„λ¥Ό λ‚®μ¶ μ μλ‹¤.

    - λ”°λΌμ„ ν…μ¤νΈ μ½”λ“λ¥Ό μ–Έμ  μ¨μ•Ό ν•λ”μ§€μ— λ€ν• νλ‹¨λ„ κµ‰μ¥ν μ¤‘μ”ν•λ‹¤.

- `should` μµμ…μ„ `not.be.visible`λ΅ λ³€κ²½ν•λ©΄ μ–΄λ–¤ λ¬Έμ κ°€ λ°μƒν•λ”μ§€ ν™•μΈν•λ‹¤.

  - ν…μ¤νΈ μμƒ κ²°κ³Όκ°€ μ³μ§€ μ•μ„ λ•λ” λ‹¤μκ³Ό κ°™μ΄ μ—λ¬λ¥Ό ν†µν•΄ μ–΄λ–¤ λ¬Έμ κ°€ μλ”μ§€ μ•λ ¤μ¤€λ‹¤.

    - ν„μ¬ μƒν’ λ©λ΅μ΄ μ΄λ―Έ μ΅΄μ¬ν•λ” μƒνƒμΈλ° `not.be.visible`λ΅ μμƒν•κ³  μμ–΄ μ¤λ¥κ°€ λ°μƒν•λ” κ²ƒμ„ ν™•μΈν•  μ μλ‹¤.

    |                                                   ν…μ¤νΈ μ‹¤ν–‰ μ¤λ¥                                                    |
    | :-------------------------------------------------------------------------------------------------------------------: |
    | <img width="500" alt="image" src="https://github.com/user-attachments/assets/7b55046e-5bec-4b40-bf34-80061f56f001" /> |


### baseUrl μ„¤μ •κ³Ό ν…μ¤νΈ μ‹¤ν–‰ λ…λ Ήμ–΄ ν

- λ£¨νΈ ν΄λ”μ `cypress.config.js` νμΌλ΅ μ΄λ™ν•λ‹¤.

  |                                                  `cypress.config.js`                                                  |
  | :-------------------------------------------------------------------------------------------------------------------: |
  | <img width="200" alt="image" src="https://github.com/user-attachments/assets/e6e61a6d-e7af-41a0-b63d-49e5bcb0c118" /> |

- `e2e` ν•μ„μ— λ‹¤μκ³Ό κ°™μ΄ `baseUrl`μ„ μ§€μ •ν•λ©΄, λ§¤λ² ν…μ¤νΈ μ½”λ“μ—μ„ `baseUrl`μ„ μΉλ” λ¶€λ¶„μ΄ ν•„μ” μ—†μ–΄μ§€κ³  `/` ν•λ‚λ§ μ§€μ •ν•λ©΄ λλ‹¤.

  ```js
  module.exports = defineConfig({
    e2e: {
      baseUrl: 'http://localhost:3000',
      setupNodeEvents(on, config) {
        // implement node event listeners here
      },
    },
  });
  ```

- μ΄μ  ν…μ¤νΈ μ½”λ“μ—μ„ `baseUrl`μ„ μ§μ ‘ μ…λ ¥ν• λ¶€λ¶„μ„ μ κ±°ν•κ³  `/`λ§ μ§€μ •ν•΄λ„ `http://localhost:3000`μΌλ΅ μ΄λ™ν•  κ²ƒμ΄λ‹¤.

  ```js
  describe('μƒν’ λ©λ΅ νμ΄μ§€', () => {
    // μ²« λ²μ§Έ ν…μ¤νΈ μ‹λ‚λ¦¬μ¤
    it('νμ΄μ§€μ— μ§„μ…ν–μ„ λ• μƒν’ λ©λ΅μ΄ ν‘μ‹λλ‹¤.', () => {
      cy.visit('/');
      cy.getByCy('product-item').should('be.visible');
    });
  });
  ```

- ν…μ¤νΈ μ‹¤ν–‰ κ²°κ³Όλ” λ‹¤μκ³Ό κ°™λ‹¤.

  |                                                   ν…μ¤νΈ μ‹¤ν–‰ κ²°κ³Ό                                                    |
  | :-------------------------------------------------------------------------------------------------------------------: |
  | <img width="500" alt="image" src="https://github.com/user-attachments/assets/796ee06d-d5dd-4b03-ae24-f55246eeb38b" /> |

### λ‘ λ²μ§Έ ν…μ¤νΈ μ½”λ“ μ‘μ„±

- λ‘ λ²μ§Έ ν…μ¤νΈ μ‹λ‚λ¦¬μ¤λ¥Ό μ‘μ„±ν•λ‹¤.

  > β‘΅ λ‚΄λΉ„κ²μ΄μ… λ°”μ λ§ν¬λ¥Ό ν΄λ¦­ν•λ©΄ ν•΄λ‹Ή νμ΄μ§€λ΅ μ΄λ™ν•λ‹¤.

  - μ¥λ°”κµ¬λ‹ λ§ν¬ μ”μ†μ— cypress ν…μ¤νΈ IDλ¥Ό λ¶€μ—¬ν•λ‹¤.

    ```jsx
    <Link data-cy="cart-link" href="/cart">
      Cart
    </Link>
    ```

  - μ¥λ°”κµ¬λ‹ λ§ν¬λ¥Ό λ¶λ¬μ™€μ„ λ§ν¬λ¥Ό ν΄λ¦­ν•λ©΄ ν•΄λ‹Ή νμ΄μ§€λ΅ μ΄λ™ν•λ”μ§€ ν…μ¤νΈν•λ‹¤.

    - `cy.url()`: ν„μ¬ νμ΄μ§€μ URLμ„ κ°€μ Έμ¤λ” api
    - `should('include', '/cart')`: URLμ΄ `/cart`λ¥Ό ν¬ν•¨ν•λ”μ§€ ν™•μΈ(assertion)ν•λ‹¤.

    ```js
    // λ‘ λ²μ§Έ ν…μ¤νΈ μ‹λ‚λ¦¬μ¤
    it('λ‚΄λΉ„κ²μ΄μ… λ°”μ μ¥λ°”κµ¬λ‹ λ§ν¬λ¥Ό ν΄λ¦­ν•λ©΄ μ¥λ°”κµ¬λ‹ νμ΄μ§€λ΅ μ΄λ™ν•λ‹¤.', () => {
      // prepare (μ¤€λΉ„)
      // cy.visit();

      // action (μ‚¬μ©μ μΈν„°λ ‰μ…)
      cy.getByCy('cart-link').click();

      // assertion (λ³΄μ¥)
      cy.url().should('include', '/cart');
    });
    ```

- ν…μ¤νΈ μ‹¤ν–‰ κ²°κ³Όλ” λ‹¤μκ³Ό κ°™λ‹¤.

  |                                                   ν…μ¤νΈ μ‹¤ν–‰ κ²°κ³Ό                                                    |
  | :-------------------------------------------------------------------------------------------------------------------: |
  | <img width="500" alt="image" src="https://github.com/user-attachments/assets/6a894562-d347-4388-9471-f15e5a0f5208" /> |

### λ‘ λ²μ§Έ ν…μ¤νΈ μ½”λ“μ μ»¤λ²„λ¦¬μ§€ λ†’μ΄κΈ°

- λ‘ λ²μ§Έ ν…μ¤νΈ μ½”λ“λ¥Ό μ‘μ„±ν• κµ¬κ°„μ€ μ‚¬μ‹¤μƒ λ§ν¬μ λ™μ‘λ§μ„ κ²€μ¦ν•κ³  μλ‹¤.

  β‡’ **μ¥λ°”κµ¬λ‹ UIκ°€ λ–΄λ”μ§€ μ• λ–΄λ”μ§€ κ²€μ¦ν•μ§€ μ•μ•„** ν…μ¤νΈ μ»¤λ²„λ¦¬μ§€κ°€ λ‚®λ‹¤.

- μ¥λ°”κµ¬λ‹ νμ΄μ§€λ΅ μ΄λ™ν–μ„ λ• **μ¥λ°”κµ¬λ‹ νμ΄μ§€**λΌλ” ν—¤λ”κ°€ ν™”λ©΄μ— ν‘μ‹λλ‹¤λ©΄ νμ΄μ§€μ μ”μ†κ°€ μ–΄λ μ •λ„ κ·Έλ ¤μ΅λ‹¤κ³  νλ‹¨ν•  μ μμ„ κ²ƒμ΄λ‹¤. λ”°λΌμ„ ν…μ¤νΈ μ½”λ“λ¥Ό μ¶”κ°€ν•λ‹¤.

  > β‘΅-1 νμ΄μ§€λ΅ μ΄λ™ν–μ„ λ• ν•΄λ‹Ή νμ΄μ§€μ ν—¤λ”κ°€ ν™”λ©΄μ— ν‘μ‹λλ‹¤.

  - μ¥λ°”κµ¬λ‹ νμ΄μ§€μ ν—¤λ”μ— cypress ν…μ¤νΈ IDλ¥Ό λ¶€μ—¬ν•λ‹¤.

    ```jsx
    <h1 data-cy="cart-header">μ¥λ°”κµ¬λ‹ νμ΄μ§€</h1>
    ```

  - μ¥λ°”κµ¬λ‹ νμ΄μ§€λ΅ μ΄λ™ν–μ„ λ• μ¥λ°”κµ¬λ‹ ν—¤λ”κ°€ ν™”λ©΄μ— μ ν‘μ‹λλ”μ§€ ν…μ¤νΈν•λ‹¤.

    ```js
    cy.getByCy('cart-header').should('be.visible');
    ```

  - ν…μ¤νΈ μ‹¤ν–‰ κ²°κ³Όλ” λ‹¤μκ³Ό κ°™λ‹¤. `assertion`μ΄ μ¶”κ°€λμ–΄ ν…μ¤νΈ μ½”λ“μ μ»¤λ²„λ¦¬μ§€κ°€ λ†’μ•„μ§„ κ²ƒμ„ ν™•μΈν•  μ μλ‹¤.

    |                                                    ν…μ¤νΈ μ‹¤ν–‰ κ²°κ³Ό                                                    |
    | :--------------------------------------------------------------------------------------------------------------------: |
    | <img width="500" alt="image" src="https://github.com/user-attachments/assets/b8d2be6c-b378-4499-88ac-bb458084f494" /> |

### ν…μ¤νΈ μ½”λ“μ μ μ ν• assertion κ°μ

- ν…μ¤νΈ μ½”λ“μ ν•λ‚μ μ‹λ‚λ¦¬μ¤μ—λ” ν•λ‚μ assertionλ§ μ¶”κ°€ν•λ” κ²ƒμ„ κ¶μ¥ν•λ‹¤.

  - μ„μ μμ‹μ—μ„λ” URLκ³Ό ν—¤λ”λ¥Ό λ¨λ‘ κ²€μ¦ν–μ§€λ§, μ‚¬μ‹¤ `cart-header`κ°€ μ λ λ”λ§λμ—λ‹¤λ” κ²ƒμ΄ ν™•μΈλλ‹¤λ©΄ URLμ€ λ‹Ήμ—°ν κ²€μ¦λμ—λ‹¤κ³  λ³Ό μ μλ‹¤.

  **β‡’ URLμ΄ λ°”λ€μ—λ‹¤κ³  ν•΄μ„ νμ΄μ§€κ°€ μ λ€λ΅ λ λ”λ§μ΄ λμ—λ”μ§€λ” κ²€μ¦ν•  μ μ—†μ§€λ§ νμ΄μ§€μ UIκ°€ λ λ”λ§ λμ—λ‹¤λ©΄ URLμ΄ μ λ³€κ²½λ κ²ƒμ€ κ²€μ¦ν•  μ μλ‹¤.**

### μ„Έ λ²μ§Έ ν…μ¤νΈ μ½”λ“ μ‘μ„±

- μ„Έ λ²μ§Έ ν…μ¤νΈ μ‹λ‚λ¦¬μ¤λ¥Ό μ‘μ„±ν•λ‹¤.

  > β‘Ά λ©λ΅μ„ ν΄λ¦­ν–μ„ λ• μƒμ„Έ νμ΄μ§€λ΅ μ΄λ™ν•λ‹¤.

  - μƒν’(item) μ”μ†λ¥Ό λ¶λ¬μ™€μ„ λ§ν¬λ¥Ό ν΄λ¦­ν•λ©΄ ν•΄λ‹Ή μƒν’μ μƒμ„Έ νμ΄μ§€λ΅ μ΄λ™ν•λ”μ§€ ν…μ¤νΈν•λ‹¤.

    - `cy.getByCy('product-item')` apiλ¥Ό μ΄μ©ν•λ©΄ μƒν’ λ©λ΅μ— μλ” μƒν’μ„ λ¨λ‘ κ²€μƒ‰ν•΄μ„ λ¶λ¬μ¤κΈ° λ•λ¬Έμ— λ°°μ—΄μ— λ‹΄κΈΈ μλ„ μλ‹¤. λ”°λΌμ„ μ²« λ²μ§Έ DOM μ”μ†λ§ μ„ νƒν•λ‹¤.

      - `first()`: λ¶λ¬μ¨ μ—¬λ¬ μ”μ† μ¤‘ μ²« λ²μ§Έ μ”μ†λ§ μ„ νƒν•λ‹¤.

      <br />

    ```js
    // μ„Έ λ²μ§Έ ν…μ¤νΈ μ‹λ‚λ¦¬μ¤
    it('μƒν’ λ©λ΅μ μ•„μ΄ν…μ„ ν΄λ¦­ν•λ©΄ μƒν’ μƒμ„Έ νμ΄μ§€λ΅ μ΄λ™ν•λ‹¤.', () => {
      // action
      cy.getByCy('product-item').first().click();

      // assertion
      cy.url().should('include', '/products/');
    });
    ```

    - `product-header`λ¥Ό μƒν’ λ©λ΅ νμ΄μ§€μ™€ μƒν’ μƒμ„Έ νμ΄μ§€μ—μ„ κ³µν†µμΌλ΅ μ‚¬μ©ν•κ³  μμ–΄ UIλ¥Ό μ΄μ©ν• κ²€μ¦ κ³Όμ •μ„ μ΄μ©ν•μ§€ μ•μ•λ‹¤.(ν…μ¤νΈ μ½”λ“λ” μµλ€ν• κ°„λ‹¨ν•κ² μ‘μ„±ν•λ” κ²ƒμ΄ μ¤‘μ”ν•κΈ° λ•λ¬Έμ΄λ‹¤.)

- ν…μ¤νΈ μ‹¤ν–‰ κ²°κ³Όλ” λ‹¤μκ³Ό κ°™λ‹¤.

  |                                                   ν…μ¤νΈ μ‹¤ν–‰ κ²°κ³Ό                                                    |
  | :-------------------------------------------------------------------------------------------------------------------: |
  | <img width="500" alt="image" src="https://github.com/user-attachments/assets/7d399936-bde8-4e25-a9c2-7a3705790b49" /> |

---

## 7. μ‹¤μ „ ν”„λ΅μ νΈ - Part 2

### μƒν’ μƒμ„Έ νμ΄μ§€ μ²« λ²μ§Έ ν…μ¤νΈ μ½”λ“ μ‘μ„±

> β‘  μƒν’ μƒμ„Έ νμ΄μ§€λ΅ μ΄λ™ν•λ©΄ μƒν’μ μ΄λ¦„κ³Ό κ°€κ²©μ΄ μ •μƒμ μΌλ΅ ν‘μ‹λλ‹¤.

- μƒν’ μƒμ„Έ νμ΄μ§€μ— μλ” μ”μ†μ— cypress ν…μ¤νΈ IDλ¥Ό λ¶€μ—¬ν•λ‹¤.

  ```jsx
  <div>
    <Image data-cy="product-image" src={imageUrl} width={250} height={250} alt={name} />
  </div>
  <div className={styles.description}>
    <p data-cy="product-name">{name}</p>
    <p data-cy="product-price">{price}</p>
    <button onClick={addCart}>μ¥λ°”κµ¬λ‹μ— λ‹΄κΈ°</button>
  </div>
  ```

- ν…μ¤νΈ μ½”λ“λ¥Ό μ‘μ„±ν•λ‹¤.

  ```js
  describe('μƒν’ μƒμ„Έ νμ΄μ§€', () => {
    it('μƒν’ μƒμ„Έ νμ΄μ§€λ΅ μ΄λ™ν•λ©΄ μƒν’μ μ΄λ¦„κ³Ό κ°€κ²©μ΄ μ •μƒμ μΌλ΅ ν‘μ‹λλ‹¤.', () => {
      // prepare & action
      cy.visit('/products/0');

      // assertion
      cy.getByCy('product-image').should('be.visible');
      cy.getByCy('product-name').should('be.visible');
      cy.getByCy('product-price').should('be.visible');
    });
  });
  ```

- ν…μ¤νΈ μ‹¤ν–‰ κ²°κ³Όλ” λ‹¤μκ³Ό κ°™λ‹¤.

  |                                                   ν…μ¤νΈ μ‹¤ν–‰ κ²°κ³Ό                                                    |
  | :-------------------------------------------------------------------------------------------------------------------: |
  | <img width="500" alt="image" src="https://github.com/user-attachments/assets/f0dc1b5d-eb39-4056-a9a7-e25cf78edccc" /> |

### μƒν’ μƒμ„Έ νμ΄μ§€ λ‘ λ²μ§Έ ν…μ¤νΈ μ½”λ“ μ‘μ„± - μ‹μ¤ν… alert

> β‘΅ μƒν’μ„ μ¥λ°”κµ¬λ‹μ— μ¶”κ°€ν–μ„ λ• μ‹μ¤ν… alertκ°€ μ λ‚νƒ€λ‚λ”μ§€ ν™•μΈν•λ‹¤.

- "μ¥λ°”κµ¬λ‹μ— λ‹΄κΈ°" λ²„νΌμ— cypress ν…μ¤νΈ IDλ¥Ό λ¶€μ—¬ν•λ‹¤.

  ```jsx
  <button data-cy="cart-button" onClick={addCart}>
    μ¥λ°”κµ¬λ‹μ— λ‹΄κΈ°
  </button>
  ```

- "μ¥λ°”κµ¬λ‹μ— λ‹΄κΈ°" λ²„νΌμ„ ν΄λ¦­ μ‹λ®¬λ μ΄μ… μ½”λ“λ¥Ό μ‘μ„±ν•λ‹¤.

  - `then()`: μ• λ™μ‘μ΄ μ‹¤ν–‰λκ³  λ‚λ©΄ μ—°κ²°ν•΄μ„ μ‹¤ν–‰ν•  λ™μ‘μ— λ€ν•΄ μ •μν•λ” cypress api ([κ³µμ‹λ¬Έμ„](https://docs.cypress.io/api/commands/then))

    ```js
    cy.getByCy('cart-button').click().then();
    ```

    - ν΄λ¦­ν•΄μ„ λ‚μ¨ κ²°κ³Όλ¬Όμ— λ€ν• μ”μ† μ ‘κ·Όμ΄ ν•„μ”ν•  λ• μ‚¬μ©ν•λ‹¤.

  ```js
  cy.getByCy('cart-button').click();
  ```

- [κ³µμ‹λ¬Έμ„](https://docs.cypress.io/api/cypress-api/catalog-of-events#Window-Alert)λ¥Ό μ°Έκ³ ν•μ—¬ μ‹μ¤ν… alert κ΄€λ ¨ cypress μ½”λ“λ¥Ό μ‘μ„±ν•λ‹¤.

  - ν…μ¤νΈ μ½”λ“ μ‹¤ν–‰ μ „ `stub`μ„ μ‹¤ν–‰ν•λ” κ²ƒμ΄ μΆ‹λ‹¤.

  ```js
  it('μ¥λ°”κµ¬λ‹μ— λ‹΄κΈ° λ²„νΌμ„ ν΄λ¦­ν•λ©΄ "μ¥λ°”κµ¬λ‹μ— μ¶”κ°€λ¨"μ΄ ν‘μ‹λλ‹¤.', () => {
    // prepare
    const stub = cy.stub();
    cy.on('window:alert', stub);

    // action
    cy.getByCy('cart-button')
      .click()
      .then(() => {
        // assertion
        expect(stub.getCall(0)).to.be.calledWith('μ¥λ°”κµ¬λ‹μ— μ¶”κ°€λ¨');
    });
  });
  ```

- ν…μ¤νΈ μ‹¤ν–‰ κ²°κ³Όλ” λ‹¤μκ³Ό κ°™λ‹¤.

  |                                                   ν…μ¤νΈ μ‹¤ν–‰ κ²°κ³Ό                                                    |
  | :-------------------------------------------------------------------------------------------------------------------: |
  | <img width="500" alt="image" src="https://github.com/user-attachments/assets/0729874c-a1f2-406d-8a2e-d955dd73f99c" /> |

### μƒμν™”

- μ»΄ν¬λ„νΈμ—μ„ μ‘μ„±ν• μ½”λ“μ™€ ν…μ¤νΈμ—μ„ μ‘μ„±ν• μ½”λ“κ°€ ν•λ‚λΌλ„ λ‹¤λ¥Ό κ²½μ° μ—λ¬κ°€ λ°μƒν•λ‹¤.

  |                                            **"."** ν•λ‚ μ°¨μ΄λ΅ λ°μƒν• μ—λ¬                                            |
  | :-------------------------------------------------------------------------------------------------------------------: |
  | <img width="500" alt="image" src="https://github.com/user-attachments/assets/066c947b-5074-42e0-b279-3ed1188317d5" /> |

- μ»΄ν¬λ„νΈμ μ™Έλ¶€μ—μ„ ν•΄λ‹Ή λ©”μ‹μ§€λ¥Ό μƒμν™”ν•μ—¬ `export`ν•λ‹¤.

  ```jsx
  import React from 'react';
  ...
  export const ALERT_MESSAGE = 'μ¥λ°”κµ¬λ‹μ— μ¶”κ°€λ¨';

  function ProductDetail({ product }) {
    ...
    const addCart = async () => {
      try {
        const { data } = await createCartItem(product);
        // alert(`${data.name}κ°€ μ¥λ°”κµ¬λ‹μ— λ‹΄κ²Όμµλ‹λ‹¤`);
        alert(ALERT_MESSAGE);
        router.push('/cart');
      } catch (error) {
        console.log(error);
      }
    };
    ...
  }
  ```

- ν…μ¤νΈ μ½”λ“μ—μ„ ν•΄λ‹Ή μƒμλ¥Ό λ¶λ¬μ¨λ‹¤.

  ```jsx
  // action
  cy.getByCy('cart-button')
    .click()
    .then(() => {
      // assertion
      expect(stub.getCall(0)).to.be.calledWith(ALERT_MESSAGE);
    });
  ```

### μ„Έ λ²μ§Έ ν…μ¤νΈ μ½”λ“ μ‘μ„±

- ν…μ¤νΈ μ½”λ“ μ‹¤ν–‰ ν

  - `it.only`: cypressκ°€ `only` ν‚¤μ›λ“κ°€ μλ” ν…μ¤νΈ μ‹λ‚λ¦¬μ¤λ§ μ‹¤ν–‰ν•λ‹¤.
  - `it.skip`: cypressκ°€ `skip` ν‚¤μ›λ“κ°€ μλ” ν…μ¤νΈ μ‹λ‚λ¦¬μ¤λ” μ‹¤ν–‰ν•μ§€ μ•λ”λ‹¤.

  β‡’ μ§€μ •ν• ν…μ¤νΈ μ½”λ“λ¥Ό μ‹¤ν–‰/κ±΄λ„λ›°κΈ° ν•κΈ° λ•λ¬Έμ— λ‹¤λ¥Έ ν…μ¤νΈ μ‹λ‚λ¦¬μ¤ μ‹¤ν–‰μΌλ΅ μΈν• λ°μ΄ν„° μ¤μ—Όμ„ λ°©μ§€ν•  μ μλ‹¤.

> β‘Ά μƒν’μ„ μ¥λ°”κµ¬λ‹μ— μ¶”κ°€ν–μ„ λ• μ¥λ°”κµ¬λ‹ νμ΄μ§€λ΅ μ μ΄λ™ν•λ”μ§€ ν™•μΈν•λ‹¤.

- ν…μ¤νΈ μ½”λ“λ¥Ό μ‘μ„±ν•λ‹¤.

  ```js
  // μ„Έ λ²μ§Έ ν…μ¤νΈ μ‹λ‚λ¦¬μ¤
  it.only('μ¥λ°”κµ¬λ‹ λ²„νΌμ„ ν΄λ¦­ν•λ©΄ μ¥λ°”κµ¬λ‹ νμ΄μ§€λ΅ μ΄λ™ν•λ‹¤.', () => {
    // action
    cy.getByCy('cart-button').click();

    // assertion
    cy.url().should('include', '/cart');
  });
  ```

- `it.only`λ¥Ό μ‚¬μ©ν–κΈ° λ•λ¬Έμ— ν•΄λ‹Ή ν…μ¤νΈ μ‹λ‚λ¦¬μ¤λ§ μ‹¤ν–‰λ κ²ƒμ„ cypress UIμ—μ„ ν™•μΈν•  μ μλ‹¤.

  |                                                   ν…μ¤νΈ μ‹¤ν–‰ κ²°κ³Ό                                                    |
  | :-------------------------------------------------------------------------------------------------------------------: |
  | <img width="500" alt="image" src="https://github.com/user-attachments/assets/c143f988-6138-4661-a3e7-6a4c19923c75" /> |

### λ„¤ λ²μ§Έ ν…μ¤νΈ μ½”λ“ μ‘μ„±

- μ¥λ°”κµ¬λ‹ νμ΄μ§€μ— λ€ν• ν…μ¤νΈ μ½”λ“λ¥Ό μ‘μ„±ν•λ‹¤.

  > β‘  μ¥λ°”κµ¬λ‹ νμ΄μ§€μ— μ ‘μ†ν–μ„ λ• μƒν’ λ©λ΅μ΄ ν‘μ‹λλ‹¤.

  ```js
  // μ²« λ²μ§Έ ν…μ¤νΈ μ‹λ‚λ¦¬μ¤
  it('νμ΄μ§€λ΅ μ§„μ…ν–μ„ λ• μƒν’ λ©λ΅μ΄ ν‘μ‹λλ‹¤.', () => {
    // assertion
    cy.getByCy('cart-image').should('be.visible');
    cy.getByCy('cart-name').should('be.visible');
    cy.getByCy('cart-price').should('be.visible');
  });
  ```

  > β‘΅ μ‚­μ ν•κΈ° λ²„νΌμ„ λλ €μ„ λ• μƒν’μ΄ μ‚­μ λλ‹¤.

  - `then` κµ¬λ¬Έμ„ μ‚¬μ©ν•μ§€ μ•κ³  λ‹¤μκ³Ό κ°™μ΄ μ½”λ“λ¥Ό μ‘μ„±ν•λ©΄ λ¬Έμ κ°€ λ°μƒν•λ‹¤.

    ```js
    const cartLength = cy.getByCy('cart-list').length;

    cy.getByCy('cart-delete-button')
      .first()
      .click()
      .then(() => {
        cy.getByCy('cart-amount').contains(cartLength - 1);
      });
    ```

    - κ·Έ μ΄μ λ” `cy.getByCy('cart-list')`κ°€ λΉ„λ™κΈ° λ…λ Ήμ΄λ―€λ΅, cypress λ…λ Ήμ–΄κ°€ μ¦‰μ‹ κ°’μ„ λ°ν™ν•μ§€ μ•κ³  μ²΄μΈ ν•νƒλ΅ μ‹¤ν–‰ νμ— λ“±λ΅ν•κΈ° λ•λ¬Έμ— length κ°™μ€ λ™κΈ° JavaScript λ©”μ„λ“λ¥Ό λ°”λ΅ νΈμ¶ν•λ©΄ undefined λλ” μ¤λ¥κ°€ λ°μƒν•λ” κ²ƒμ΄λ‹¤.

    - μ—λ¬ λ‚΄μ©

      |                                                   ν…μ¤νΈ μ‹¤ν–‰ κ²°κ³Ό                                                    |
      | :-------------------------------------------------------------------------------------------------------------------: |
      | <img width="500" alt="image" src="https://github.com/user-attachments/assets/2a14177f-ebeb-4037-ad6a-f12e01c32018" /> |

  - λ”°λΌμ„ `then` κµ¬λ¬Έ μ•μ—μ„ λΉ„λ™κΈ° λ…λ Ήμ„ μ²λ¦¬ν•λ‹¤.

    ```js
    // λ‘ λ²μ§Έ ν…μ¤νΈ μ‹λ‚λ¦¬μ¤
    it('μ‚­μ ν•κΈ° λ²„νΌμ„ ν΄λ¦­ν•λ©΄ μ¥λ°”κµ¬λ‹ λ©λ΅μ μ΄ μλ‰μ΄ 1 κ°μ†ν•λ‹¤.', () => {
      cy.getByCy('cart-list').then(($list) => {
        const cartLength = $list.length;

        cy.getByCy('cart-delete-button')
          .first()
          .click()
          .then(() => {
            cy.getByCy('cart-amount').contains(cartLength - 1);
          });
      });
    });
    ```

    - ν…μ¤νΈ μ‹¤ν–‰ κ²°κ³Όλ” λ‹¤μκ³Ό κ°™λ‹¤.

      |                                                   ν…μ¤νΈ μ‹¤ν–‰ κ²°κ³Ό                                                    |
      | :-------------------------------------------------------------------------------------------------------------------: |
      | <img width="500" alt="image" src="https://github.com/user-attachments/assets/fd0dc781-bc41-498e-b37d-adbbe2a9036f" /> |


<img width="300" alt="image" src="https://github.com/user-attachments/assets/07e50a22-2453-4899-b979-c27ce2f64c59" />

### API λ¨ν‚Ή λ° μΈν„°μ…‰ν„°

- **λ¨ν‚Ή(Mocking)**: μ‹¤μ  λ°μ΄ν„°κ°€ μ•„λ‹ μ„μ λ°μ΄ν„°λ΅ μƒμ„±ν•μ—¬ ν…μ¤νΈ

- `intercept`: λ„¤νΈμ›ν¬ μ”μ²­κ³Ό μ‘λ‹µμ— λ€ν•΄μ„ μ„μμ κ°’μΌλ΅ μ μ–΄ν•κΈ° μ„ν•΄ μ‚¬μ©ν•λ” API ([κ³µμ‹λ¬Έμ„](https://docs.cypress.io/api/commands/intercept))

- μƒν’ λ°μ΄ν„°μ κ°μμ— λ§μ¶°μ„ ν™”λ©΄μ΄ λ λ”λ§ λλ”μ§€μ— λ€ν•΄ ν…μ¤νΈ μ‹λ‚λ¦¬μ¤λ¥Ό μ‘μ„±ν•λ‹¤.

  > μƒν’ λ©λ΅μ΄ nκ°λ©΄ ν™”λ©΄μ— nκ°μ μƒν’μ΄ ν‘μ‹λλ‹¤.

  - μƒν’ λ©λ΅ λ°μ΄ν„°λ¥Ό λ°›μ•„ μ¤λ” API μ—”λ“ν¬μΈνΈλ¥Ό μ•κ³  μμ–΄μ•Ό ν•λ‹¤.

    |                                                    API μ—”λ“ν¬μΈνΈ                                                     |
    | :-------------------------------------------------------------------------------------------------------------------: |
    | <img width="200" alt="image" src="https://github.com/user-attachments/assets/e347ca53-0f7e-44e6-9bb0-4bf828252f9d" /> |

  - λ”λ―Έ λ°μ΄ν„°λ¥Ό λ³΄κ΄€ν•λ” `cypress/fixtures` ν΄λ” λ‚΄λ¶€μ— `index.js` νμΌμ„ μƒμ„±ν•λ‹¤.

    |                                              `cypress/fixtures/index.js`                                              |
    | :-------------------------------------------------------------------------------------------------------------------: |
    | <img width="200" alt="image" src="https://github.com/user-attachments/assets/7acdbc5d-0e43-4f3c-84dd-5ea17127802c" /> |

  - `index.js` λ‚΄λ¶€μ— APIλ΅λ¶€ν„° λ°›μ•„μ¬ μ μλ” λ°μ΄ν„° nκ°λ¥Ό λ‹¤μκ³Ό κ°™μ΄ μ €μ¥ν•κ³  `export` ν•λ‹¤.

    ```js
    const THREE_PRODUCT_ITEMS = [
      {
        id: '0',
        name: 'Refined Fresh Chicken',
        price: '209.00',
        imageUrl: 'https://cdn.pixabay.com/user/2016/03/26/22-06-36-459_250x250.jpg',
      },
      {
        id: '1',
        name: 'Intelligent Metal Mouse',
        price: '84.00',
        imageUrl: 'https://cdn.pixabay.com/user/2023/05/21/19-38-51-804_250x250.jpg',
      },
      {
        id: '2',
        name: 'Handcrafted Frozen Pizza',
        price: '315.00',
        imageUrl: 'https://cdn.pixabay.com/user/2016/06/01/15-27-35-456_250x250.jpg',
      },
    ];

    export { THREE_PRODUCT_ITEMS };
    ```

  - `intercept`μ— API μ—”λ“ν¬μΈνΈ μ£Όμ†λ¥Ό μ„¤μ •ν•΄ ν•΄λ‹Ή μ—”λ“ν¬μΈνΈμ— λ€ν• API μ”μ²­μ„ λ¨ν‚Ήν•λ‹¤.

    ```js
    cy.intercept('/products', THREE_PRODUCT_ITEMS);
    ```

  - `intercept` μ΄ν›„μ—λ” `cy.visit()`μ„ ν†µν•΄ ν• λ² λ” λ°©λ¬Έν•΄μ£Όμ–΄μ•Ό ν•λ‹¤.

    - interceptorλ” νμ΄μ§€μ— λ“¤μ–΄κ°€κΈ° μ „μ— cypressμ λ„¤νΈμ›ν¬ λ λ²¨μ—μ„ APIκ°€ μ²λ¦¬κ°€ λλ” μκ°„ `intercept`ν•λ” κ²ƒμ΄κΈ° λ–„λ¬Έμ— νμ΄μ§€μ— λ“¤μ–΄κ°€κΈ° μ „μ— λ―Έλ¦¬ ν•΄ λ‘μ–΄μ•Ό ν•λ‹¤.

    - λ”°λΌμ„ `cy.visit()`μ„ `beforeEach`μ—μ„ ν•κ³  μμ§€λ§, `intercept` μ΄ν›„μ— ν• λ² λ” μ‹¤ν–‰ν•΄μ•Ό ν•λ‹¤.

    - λ³΄ν†µ `beforeEach` λ‚΄λ¶€μ—μ„ `visit` μ „μ— μΈμ¦, API λ¨ν‚Ή μ‘μ—…μ„ μ§„ν–‰ν•κ³  μ΄λ¥Ό λ³„μΉ­(alias)λ΅ λ¶λ¬μ¤λ” ν•νƒλ¥Ό ν™μ©ν•λ‹¤.

  - ν…μ¤νΈ μ‹¤ν–‰ κ²°κ³Όλ” λ‹¤μκ³Ό κ°™λ‹¤.

    - `/products` API μ—”λ“ν¬μΈνΈλ΅ μ”μ²­μ„ λ³΄λ‚΄ λ°μ΄ν„°λ¥Ό λ°›μ•„ μ™”λ”λ°, μ΄ μ”μ²­μ€ λ¨ν‚Ήλμ–΄ μκΈ° λ•λ¬Έμ— `fixtures`μ— μ €μ¥ν• μ„μμ λ°μ΄ν„°λ¥Ό `Response.body`μ— λ¶λ¬μ¨ κ²ƒμ„ ν™•μΈν•  μ μλ‹¤.
 
    <br />

    |                                                  λ¨ν‚Ήμ΄ μΌμ–΄λ‚ λ¨μµ                                                   |                                                     λ¨ν‚Ήν• λ°μ΄ν„°                                                     |                                                   ν…μ¤νΈ μ‹¤ν–‰ κ²°κ³Ό                                                    |
    | :-------------------------------------------------------------------------------------------------------------------: | :-------------------------------------------------------------------------------------------------------------------: | :-------------------------------------------------------------------------------------------------------------------: |
    | <img width="300" alt="image" src="https://github.com/user-attachments/assets/65d9b4a1-a96d-47b3-81fe-052974f203d2" /> | <img width="300" alt="image" src="https://github.com/user-attachments/assets/07e50a22-2453-4899-b979-c27ce2f64c59" /> | <img width="300" alt="image" src="https://github.com/user-attachments/assets/03a15c57-dda7-413d-81bb-4206c8df305f" /> |

### λ‹¤μ„― λ²μ§Έ ν…μ¤νΈ μ½”λ“ μ‘μ„±

- λ„¤νΈμ›ν¬ μ”μ²­μ΄ νμ΄μ§€μ— λ“¤μ–΄κ°”μ„ λ•, μ‹κ°„μ΄ μ–Όλ§λ‚ κ±Έλ¦΄μ§€ λ¨λ¥΄κΈ° λ•λ¬Έμ— λ¨ν‚Ήμ— λ€ν• μ”μ²­μ„ κΈ°λ‹¤λ¦¬κ² λ‹¤κ³  λ…μ‹μ μΌλ΅ μ„ μ–Έν•΄μ•Ό ν•λ‹¤.

  - `as`λ¥Ό ν†µν•΄ μ”μ²­μ— λ€ν• λ³„μΉ­(alias)λ¥Ό μ„¤μ •ν•λ‹¤.

    ```js
    cy.intercept('/products', THREE_PRODUCT_ITEMS).as('getProducts');
    ```

  - `cy.wait(@alias)`λ¥Ό ν†µν•΄ νμ΄μ§€μ— μ§„μ…ν•κ³  λ‚μ„ λ„¤νΈμ›ν¬ μ”μ²­μ΄ λλ‚  λ•κΉμ§€ κΈ°λ‹¤λ¦°λ‹¤.

    > `wait` λ‚΄λ¶€μ—λ” μ„μμ μ‹κ°„(ex. 3000, 5000)μ„ μ§€μ •ν•λ” κ²ƒμ΄ μ•„λ‹λΌ, μ •ν™•μ΄ μ–΄λ–¤ μ”μ²­μ„ κΈ°λ‹¤λ¦¬λ”μ§€ λ³„μΉ­μ„ μ§€μ •ν•΄μ•Ό ν•λ‹¤.

    ```js
    cy.intercept('/products', THREE_PRODUCT_ITEMS).as('getProducts');
    cy.visit('/');
    cy.wait('@getProducts');
    ```

  - μ”μ²­μ— λ€ν• μ‘λ‹µμ΄ nκ° μ΅΄μ¬ν•λ‹¤λ” κ²ƒμ„ ν™•μΈν•λ‹¤.

    ```js
    cy.getByCy('product-item').should('have.length', 3);
    ```

  - ν…μ¤νΈ μ‹¤ν–‰ κ²°κ³Όλ” λ‹¤μκ³Ό κ°™λ‹¤.

    |                                                   ν…μ¤νΈ μ‹¤ν–‰ κ²°κ³Ό                                                    |
    | :-------------------------------------------------------------------------------------------------------------------: |
    | <img width="500" alt="image" src="https://github.com/user-attachments/assets/c325fbdf-71e4-4515-a3cf-f1c77e0268ef" /> |
